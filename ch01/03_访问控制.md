
### 数据库连接

MongoDB 数据库连接的标准 URI 语法如下:
```sh
mongodb://[username:password@]host1[:port1][,host2[:port2],...[/[database]][?options]]
```
例如本地连接:
```sh
mongodb://localhost
```
连接三台:
```sh
mongodb://localhost,localhost:27018,localhost:27019
```

### mongo

MongoDB 的命令行 shell 为 mongo，将其置于可搜索命令路径下，缺省时会连接到 localhost:27017 上，也可以指定端口:
```sh
mongo --port 28015
```

也可以像下面这样连接到远程主机:
```sh
mongo "mongodb://mongodb0.example.com:28015"
mongo --host mongodb0.example.com:28015
mongo --host mongodb0.example.com --port 28015
```

认证连接时，需要指定用户名称，认证库，以及可选的密码(不在命令行提供时，会在连接时提示输入)，例如以 alice 用户进行远程连接:
```sh
mongo "mongodb://alice@mongodb0.example.com:28015/?authSource=admin"
```
也可以像下面这样进行认证连接:
```sh
mongo --username alice --password --authenticationDatabase admin --host mongodb0.example.com --port 28015
```

### 创建一个用户管理员

具体就是向 `admin` 库中添加一个 `userAdminAnyDatabase` 角色用户，当然也可以根据需要为该用户添加其他角色，如 `readWriteAnyDatabase`。总之，权限要能够担当管理之名:
```sh
use admin
db.createUser(
  {
    user: "myUserAdmin",
    pwd: "yourpassword",
    roles: [
      {
        role: "userAdminAnyDatabase", db: "admin"
      },
      "readWriteAnyDatabase"
    ]
  }
)
```
`admin` 在这里作为用户的认证库。当然，也不阻止使用者在其他库中创建用户。